<!DOCTYPE html>
<html lang="ko"
      xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragment/layout::main(
      ~{::title},       
      ~{::link},
      ~{::script},
      ~{},
      ~{::top},         
      ~{::banner},      
      ~{::gnb},         
      ~{::main},        
      ~{::footer}       
      )}">
<head>
  <title th:fragment="title" th:text="${faq.question + ' - FAQ'}">FAQ 상세</title>
  <link rel="stylesheet" href="/css/faq/detail.css">
  <script defer src="/js/faq/detail.js"></script>
</head>
<body>
  <!-- 상단 메뉴 -->
  <th:block th:fragment="top">
    <nav class="topmenu" th:insert="~{fragment/top::topmenu}"/>
  </th:block>

  <!-- 배너 -->
  <th:block th:fragment="banner">
    <header class="head" th:insert="~{fragment/banner::global}"/>
  </th:block>
  
  <!-- GNB -->
  <th:block th:fragment="gnb">
    <nav class="gnb" th:insert="~{fragment/menu::gnbmenu}"/>
  </th:block>
  
  <!-- 본문 -->
  <th:block th:fragment="main">
    <main class="main">
      <div class="faq-detail-container">
        <!-- 에러 메시지 -->
        <div th:if="${error}" class="error-message">
          <div class="error-icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <h3>오류가 발생했습니다</h3>
          <p th:text="${error}">오류 메시지</p>
          <a href="/faq" class="btn btn-primary">FAQ 목록으로 돌아가기</a>
        </div>

        <!-- FAQ 상세 내용 -->
        <div th:if="${faq != null}" class="faq-detail">
          <!-- 페이지 헤더 -->
          <div class="page-header">
            <div class="breadcrumb">
              <a href="/faq" class="breadcrumb-item">FAQ</a>
              <span class="breadcrumb-separator">/</span>
              <span class="breadcrumb-item active">상세보기</span>
            </div>
            <h1 class="page-title">FAQ 상세보기</h1>
          </div>

          <!-- FAQ 내용 -->
          <article class="faq-content">
            <!-- FAQ 헤더 -->
            <div class="faq-header">
              <div class="faq-category">
                <span class="category-badge" th:text="${faq.categoryName}">카테고리</span>
              </div>
              <div class="faq-meta">
                <span class="date">
                  <i class="fas fa-calendar"></i>
                  <span th:text="${#temporals.format(faq.cdate, 'yyyy.MM.dd HH:mm')}">작성일</span>
                </span>
                <span class="views" th:if="${faq.viewCount > 0}">
                  <i class="fas fa-eye"></i>
                  <span th:text="${faq.viewCount}">조회수</span>
                </span>
              </div>
            </div>

            <!-- FAQ 질문 -->
            <div class="faq-question-section">
              <h2 class="faq-question" th:text="${faq.question}">질문 제목</h2>
            </div>

            <!-- FAQ 답변 -->
            <div class="faq-answer-section">
              <div class="answer-content" th:utext="${faq.answer}">답변 내용</div>
            </div>

                         <!-- FAQ 푸터 -->
             <div class="faq-footer">
               <!-- 평가 액션 버튼 (상세 페이지에서만 제공) -->
               <div class="faq-actions">
                 <button type="button" class="action-btn helpful-btn" 
                         th:data-faq-id="${faq.faqId}"
                         title="도움됨으로 표시">
                   <i class="fas fa-thumbs-up"></i>
                   도움됨 (<span class="helpful-count" th:text="${faq.helpfulCount}">0</span>)
                 </button>
                 <button type="button" class="action-btn unhelpful-btn" 
                         th:data-faq-id="${faq.faqId}"
                         title="도움안됨으로 표시">
                   <i class="fas fa-thumbs-down"></i>
                   도움안됨 (<span class="unhelpful-count" th:text="${faq.unhelpfulCount}">0</span>)
                 </button>
               </div>
             </div>
          </article>

          <!-- 관련 FAQ -->
          <section class="related-faqs" th:if="${relatedFaqs != null and !relatedFaqs.empty}">
            <h3 class="section-title">관련 FAQ</h3>
            <div class="related-faq-list">
              <div th:each="relatedFaq : ${relatedFaqs}" class="related-faq-item">
                <a th:href="@{/faq/{faqId}(faqId=${relatedFaq.faqId})}" class="related-faq-link">
                  <span class="related-faq-question" th:text="${relatedFaq.question}">관련 질문</span>
                  <i class="fas fa-chevron-right"></i>
                </a>
              </div>
            </div>
          </section>

          <!-- 네비게이션 -->
          <div class="faq-navigation">
            <div class="nav-buttons">
              <a href="/faq" class="btn btn-secondary">
                <i class="fas fa-list"></i>
                FAQ 목록
              </a>
              <a th:href="@{/faq(categoryId=${faq.categoryId})}" class="btn btn-primary">
                <i class="fas fa-folder"></i>
                같은 카테고리 FAQ
              </a>
            </div>
          </div>
        </div>
      </div>
    </main>
  </th:block>
  
  <!-- 푸터 -->
  <th:block th:fragment="footer">
    <footer class="foot" th:insert="~{fragment/footer::global}"/>
  </th:block>
</body>
</html>
