<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>주문 관리 - 관리자</title>
    <link rel="stylesheet" th:href="@{/css/layout.css}">
    <link rel="stylesheet" th:href="@{/css/common.css}">
    <link rel="stylesheet" th:href="@{/css/admin/order/list.css}">
</head>
<body>
    <div class="container">
        <!-- 헤더 -->
        <header class="header">
            <h1>주문 관리</h1>
            <nav class="admin-nav">
                <a th:href="@{/admin}" class="nav-link">관리자 홈</a>
                <a th:href="@{/admin/products}" class="nav-link">상품 관리</a>
                <a th:href="@{/admin/orders}" class="nav-link active">주문 관리</a>
            </nav>
        </header>

        <!-- 메인 콘텐츠 -->
        <main class="main">
            <!-- 상태 필터 -->
            <div class="filter-section">
                <h2>주문 상태별 필터</h2>
                <div class="filter-buttons">
                    <a th:href="@{/admin/orders}" 
                       th:class="${selectedStatus == null} ? 'filter-btn active' : 'filter-btn'">전체</a>
                    <a th:href="@{/admin/orders(orderStatus='PENDING')}" 
                       th:class="${selectedStatus == 'PENDING'} ? 'filter-btn active' : 'filter-btn'">주문대기</a>
                    <a th:href="@{/admin/orders(orderStatus='CONFIRMED')}" 
                       th:class="${selectedStatus == 'CONFIRMED'} ? 'filter-btn active' : 'filter-btn'">주문확정</a>
                    <a th:href="@{/admin/orders(orderStatus='SHIPPED')}" 
                       th:class="${selectedStatus == 'SHIPPED'} ? 'filter-btn active' : 'filter-btn'">배송중</a>
                    <a th:href="@{/admin/orders(orderStatus='DELIVERED')}" 
                       th:class="${selectedStatus == 'DELIVERED'} ? 'filter-btn active' : 'filter-btn'">배송완료</a>
                    <a th:href="@{/admin/orders(orderStatus='CANCELLED')}" 
                       th:class="${selectedStatus == 'CANCELLED'} ? 'filter-btn active' : 'filter-btn'">주문취소</a>
                </div>
            </div>

            <!-- 메시지 표시 -->
            <div th:if="${successMessage}" class="message success">
                <span th:text="${successMessage}"></span>
            </div>
            <div th:if="${errorMessage}" class="message error">
                <span th:text="${errorMessage}"></span>
            </div>

            <!-- 주문 목록 -->
            <div class="order-list">
                <h2>주문 목록</h2>
                <div th:if="${#lists.isEmpty(orders)}" class="empty-message">
                    <p>주문이 없습니다.</p>
                </div>
                
                <div th:if="${!#lists.isEmpty(orders)}" class="order-table">
                    <table>
                        <thead>
                            <tr>
                                <th>주문번호</th>
                                <th>주문일시</th>
                                <th>수령인</th>
                                <th>총 금액</th>
                                <th>주문상태</th>
                                <th>결제상태</th>
                                <th>결제방법</th>
                                <th>관리</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr th:each="order : orders">
                                <td>
                                    <a th:href="@{/admin/orders/{orderId}(orderId=${order.orderId})}" 
                                       th:text="${order.orderNumber}" class="order-link"></a>
                                </td>
                                <td th:text="${#temporals.format(order.cdate, 'yyyy-MM-dd HH:mm')}"></td>
                                <td th:text="${order.recipientName}"></td>
                                <td th:text="${#numbers.formatInteger(order.totalAmount, 3, 'COMMA')} + '원'"></td>
                                <td>
                                    <span th:text="${order.orderStatusText}" 
                                          th:class="'status-badge ' + ${order.orderStatus.toLowerCase()}"></span>
                                </td>
                                <td>
                                    <span th:text="${order.paymentStatusText}" 
                                          th:class="'payment-badge ' + ${order.paymentStatus.toLowerCase()}"></span>
                                </td>
                                <td th:text="${order.paymentMethodText}"></td>
                                <td>
                                    <a th:href="@{/admin/orders/{orderId}(orderId=${order.orderId})}" 
                                       class="btn btn-small">상세보기</a>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </main>
    </div>

    <script th:src="@{/js/common.js}"></script>
    <script th:src="@{/js/admin/order/list.js}"></script>
</body>
</html> 