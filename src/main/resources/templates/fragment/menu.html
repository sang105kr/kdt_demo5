<!--/* 권한에 따라 GNB메뉴를 달리 표현 시작 */-->
<!--로직 흐름:-->
<!--세션 없음 → beforeLogin-->
<!--세션 있음 + 관리자(4,5) → admin-->
<!--세션 있음 + 일반 사용자 + 마이페이지 경로 → mypage-->
<!--세션 있음 + 일반 사용자 + 일반 경로 → afterLogin-->
<th:block th:fragment="gnbmenu">
  <th:block th:insert="${session?.loginMember == null} ? ~{::beforeLogin} :
                          (${session?.loginMember?.gubun == 4 or session?.loginMember?.gubun == 5} ? ~{::admin} :
                          (${requestURI != null and requestURI.contains('/member/mypage')} ? ~{::mypage} : ~{::afterLogin}))">
  </th:block>
</th:block>
<!--/* 로그인전 */-->
<th:block th:fragment="beforeLogin">
  <ul class="menu">
    <li class="item item1"><a href="#">쇼핑</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/products}">전체 상품</a></li>
        <li th:each="cat : ${productCategories}" class="item">
          <a th:href="@{/products/category/{categoryId}(categoryId=${cat.codeId})}" th:text="${cat.decode}">카테고리명</a>
        </li>
      </ul>
    </li>
    <li class="item item2"><a th:href="@{/board}">커뮤니티</a>
      <ul class="submenu">
        <li th:each="cat : ${boardCategories}" class="item">
          <a th:href="@{/board(category=${cat.codeId})}" th:text="${cat.decode}">카테고리명</a>
        </li>
      </ul>
    </li>
    <li class="item item3"><a href="#">리뷰</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/reviews}">전체 리뷰</a></li>
      </ul>
    </li>
    <li class="item item4"><a href="#">고객지원</a>
      <ul class="submenu">
        <li class="item item1"><a href="#">공지사항</a></li>
        <li class="item item2"><a href="#">자주묻는질문</a></li>
        <li class="item item3"><a href="#">1:1문의</a></li>
      </ul>
    </li>
  </ul>
</th:block>
<!--/* 로그인 후 */-->
<th:block th:fragment="afterLogin">
  <ul class="menu">
    <li class="item item1"><a href="#">쇼핑</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/products}">전체 상품</a></li>
        <li th:each="cat : ${productCategories}" class="item">
          <a th:href="@{/products/category/{categoryId}(categoryId=${cat.codeId})}" th:text="${cat.decode}">카테고리명</a>
        </li>
      </ul>
    </li>
    <li class="item item2"><a th:href="@{/board}">커뮤니티</a>
      <ul class="submenu">
        <li th:each="cat : ${boardCategories}" class="item">
          <a th:href="@{/board(category=${cat.codeId})}" th:text="${cat.decode}">카테고리명</a>
        </li>
      </ul>
    </li>
    <li class="item item3"><a href="#">리뷰</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/reviews}">전체 리뷰</a></li>
        <li class="item item2"><a th:href="@{/member/mypage/reviews}">내 리뷰</a></li>
      </ul>
    </li>
    <li class="item item4"><a href="#">서비스</a>
      <ul class="submenu">
        <li><a href="" th:href="@{/services/searchLocation}">위치 검색</a></li>
      </ul>
    </li>
    <li class="item item4"><a href="#">고객지원</a>
      <ul class="submenu">
        <li class="item item1"><a href="#">공지사항</a></li>
        <li class="item item2"><a href="#">자주묻는질문</a></li>
        <li class="item item3"><a href="#">1:1문의</a></li>
      </ul>
    </li>
  </ul>
</th:block>
<!--/* 관리자 */-->
<th:block th:fragment="admin">
  <ul class="menu">
    <li class="item item1"><a href="#">상품관리</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/admin/product}">상품 목록</a></li>
        <li class="item item2"><a th:href="@{/admin/product/add}">상품 등록</a></li>
        <li class="item item3"><a th:href="@{/admin/product/category}">카테고리 관리</a></li>
      </ul>
    </li>
    <li class="item item2"><a href="#">주문관리</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/admin/orders}">주문 목록</a></li>
      </ul>
    </li>
    <li class="item item3"><a href="#">회원관리</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/admin/members}">회원 목록</a></li>
      </ul>
    </li>
    <li class="item item4"><a href="#">커뮤니티</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/admin/board}">게시판 관리</a></li>
        <li class="item item2"><a th:href="@{/admin/reviews}">리뷰 관리</a></li>
        <li class="item item3"><a th:href="@{/admin/comments}">댓글 관리</a></li>
      </ul>
    </li>
    <li class="item item5"><a href="#">신고/모니터링</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/admin/reports}">신고 관리</a></li>
        <li class="item item2"><a th:href="@{/admin/reports/statistics}">신고 통계</a></li>
        <li class="item item3"><a th:href="@{/admin/reports}">자동 조치 관리</a></li>
      </ul>
    </li>
    <li class="item item6"><a href="#">통계/분석</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/admin/dashboard}">대시보드</a></li>
        <li class="item item2"><a th:href="@{/admin/dashboard/camping}">캠핑장 현황</a></li>
        <li class="item item3"><a th:href="@{/admin/analytics/sales}">매출 통계</a></li>
        <li class="item item4"><a th:href="@{/admin/analytics/products}">상품 통계</a></li>
      </ul>
    </li>
    <li class="item item7"><a href="#">시스템</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/admin/settings}">시스템 설정</a></li>
        <li class="item item2"><a th:href="@{/admin/logs}">시스템 로그</a></li>
        <li class="item item3"><a th:href="@{/admin/backup}">데이터 백업</a></li>
      </ul>
    </li>
  </ul>
</th:block>
<!--/* 사용자 mypage */-->
<th:block th:fragment="mypage">
  <ul class="menu">
    <li class="item item1"><a href="#">회원정보</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/member/mypage/edit}">회원정보수정</a></li>
        <li class="item item2"><a th:href="@{/member/mypage/password}">비밀번호변경</a></li>
        <li class="item item3"><a th:href="@{/member/mypage/profile-image}">프로필사진관리</a></li>
      </ul>
    </li>
    <li class="item item2"><a href="#">주문/결제</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/member/mypage/orders}">주문내역</a></li>
        <li class="item item2"><a th:href="@{/payment/history}">결제내역</a></li>
      </ul>
    </li>
    <li class="item item3"><a href="#">활동내역</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/member/mypage/reviews}">리뷰내역</a></li>
        <li class="item item2"><a th:href="@{/member/mypage/reviews/write}">리뷰작성</a></li>
      </ul>
    </li>
    <li class="item item4"><a href="#">계정관리</a>
      <ul class="submenu">
        <li class="item item1"><a th:href="@{/member/mypage/withdraw}">회원탈퇴</a></li>
      </ul>
    </li>
  </ul>
</th:block>