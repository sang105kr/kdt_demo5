<!DOCTYPE html>
<html lang="ko" xmlns:th="http://www.thymeleaf.org"
      th:replace="~{fragment/layout::main(
        ~{::title},
        ~{::link},
        ~{::script},
        ~{},
        ~{::top},
        ~{::banner},
        ~{::gnb},
        ~{::main},
        ~{::footer}
      )}">
<head>
  <title >1:1 상담 - KDT Demo</title>
  <link rel="stylesheet" href="/css/chat/customer.css" >
  <script defer src="/js/chat/customer.js" ></script>
</head>
<body>
  <th:block th:fragment="top">
    <nav class="topmenu" th:insert="~{fragment/top::topmenu}"/>
  </th:block>
  <th:block th:fragment="banner">
    <header class="head" th:insert="~{fragment/banner::global}"/>
  </th:block>
  <th:block th:fragment="gnb">
    <nav class="gnb" th:insert="~{fragment/menu::gnbmenu}"/>
  </th:block>
  <th:block th:fragment="main">
    <main class="main">
      <!-- Chat Container -->
      <div class="chat-container">
        <div class="chat-header">
          <h2>1:1 상담</h2>
          <div class="chat-status">
            <span id="statusText">대기중...</span>
            <span id="statusIndicator" class="status-indicator waiting"></span>
          </div>
        </div>

        <div class="chat-messages" id="messageArea">
          <!-- 메시지들이 여기에 표시됨 -->
        </div>

        <div class="chat-input-area">
          <div class="chat-input-container">
            <textarea id="messageInput"
                      placeholder="메시지를 입력하세요... (Enter: 전송, Shift+Enter: 줄바꿈)"
                      maxlength="1000"></textarea>
            <div class="input-actions">
              <span id="charCount">0/1000</span>
              <button id="sendBtn" class="btn btn--primary" disabled>전송</button>
            </div>
          </div>
        </div>
      </div>
    </main>
  </th:block>
  <th:block th:fragment="footer">
    <footer class="foot" th:insert="~{fragment/footer::global}"/>
  </th:block>
  
  <!-- WebSocket 라이브러리 -->
  <script src="https://cdn.jsdelivr.net/npm/sockjs-client@1/dist/sockjs.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/stompjs@2.3.3/lib/stomp.min.js"></script>
</body>
</html>
